<div class="panel-container">
	<h2>Random Character Picker</h2>
	<div class="panel-filters" *ngIf="!spinning">
		<div class="filter-checkboxes">
			<label>
				<input type="checkbox" [(ngModel)]="includeFavorite" [disabled]="includeActive" />
				Favorite Characters
			</label>
			<label>
				<input type="checkbox" [(ngModel)]="includeActive" (ngModelChange)="onActiveChange()" />
				Active Characters
			</label>
			<label>
				<input type="checkbox" [(ngModel)]="includeInactive" />
				Inactive Characters
			</label>
			<label>
				<input type="checkbox" [(ngModel)]="includeSide" />
				Side Characters
			</label>
			<label>
				<input type="checkbox" [(ngModel)]="includeRetired" />
				Retired Characters
			</label>
			<label>
				<input type="checkbox" [(ngModel)]="includeMe" />
				Me
			</label>
		</div>
		<label [ngStyle]="{display: 'block', marginTop: '1rem'}">
			<input type="checkbox" [(ngModel)]="skipAnimation" />
			Skip Animation
		</label>
	</div>
	<button *ngIf="isMobile()" (click)="spinWheel()" [disabled]="spinning" [ngStyle]="{marginBottom: '1rem'}">{{ spinning ? 'Spinning...' : (skipAnimation ? 'Pick' : 'Spin') }}</button>
	<div class="panel-grid-wrapper">
		<div class="panel-grid">
			<div
				class="panel"
				*ngFor="let character of filteredCharacters; let i = index"
				[class.spotlight]="i === spotlightIndex"
				[class.selected]="selectedCharacter && selectedCharacter === character"
				[class.disabled]="excludedCharacters.includes(character)"
				(click)="disable(character)"
			>
				<div class="panel-name">{{ character.shortName }}</div>
			</div>
		</div>
	</div>
	<button (click)="spinWheel()" [disabled]="spinning">{{ spinning ? 'Spinning...' : (skipAnimation ? 'Pick' : 'Spin') }}</button>
	<div *ngIf="selectedCharacter" class="result">
		<h3>Selected Character:</h3>
		<img [src]="'assets/' + selectedCharacter.img" [alt]="selectedCharacter.name"
		width="128" height="128"
		(error)="selectedCharacter.img = 'Icons/extended/Unknown.png'" 
		(click)="showCard = true"
		[ngStyle]="{cursor: 'pointer'}"/>
		<p>{{ selectedCharacter.name }}</p>
		<a id="chat" [href]="getChatLink(selectedCharacter)" target="_blank">Chat</a>
	</div>
	<app-character-modal *ngIf="selectedCharacter && showCard" [character]="selectedCharacter" (close)="showCard = false"></app-character-modal>
	<button [style.background]="'#DD3333'" (click)="goBackToRoster()">
		‚Üê Back to Character Select
	</button>
</div>
