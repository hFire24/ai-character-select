<div id="characterModal">
  <button id="closeModal" (click)="close.emit()">&times;</button>
  <div class="modalHeader">
    <ng-container *ngIf="character.img; else noImg">
      <img class="modalImg" [src]="assetPath(character.img)" [alt]="character.name" />
    </ng-container>
    <ng-template #noImg>
      <div id="modalQuestionMark" class="question-mark">?</div>
    </ng-template>
    <h2 id="modalName">
      {{ character.name || 'Unknown Character' }}
    </h2>
    <div class="flags">
      <span *ngIf="character.serious">🤔</span>
      <span *ngIf="character.chaos">🤪</span>
      <span *ngIf="character.emotion?.includes('joy')">😀</span>
      <span *ngIf="character.emotion?.includes('shy')">🫣</span>
      <span *ngIf="character.emotion?.includes('calm')">😌</span>
      <span *ngIf="character.emotion?.includes('strict')">😤</span>
      <span *ngIf="character.emotion?.includes('sad')">☹️</span>
      <span *ngIf="character.emotion?.includes('angry')">😠</span>
      <span *ngIf="character.emotion?.includes('edgy')">😈</span>
      <span *ngIf="character.emotion?.includes('straightforward')">🎯</span>
      <span *ngIf="character.moe >= 7">🩷</span>
      <span *ngIf="character.musicEnjoyer">🎵</span>
    </div>
    <ng-container class="retired" *ngIf="character.type === 'retired'">
      <h3 class="retired-banner">Retired</h3>
    </ng-container>
    <ng-container class="retired" *ngIf="character.type === 'inactive'">
      <h3 class="retired-banner">Inactive</h3>
    </ng-container>
  </div>
  <div>
    <div id="modalInterests"><strong>Interests</strong>: {{character.interests}}</div>
    <div id="modalPeeves"><strong>Pet Peeves</strong>: {{character.peeves || "None"}}</div>
    <div id="modalPurpose"><strong>Purpose</strong>: {{character.purpose}}</div>
    <div id="modalFact"><strong>Fun Fact</strong>: {{character.funFact}}</div>
    <div id="modalRetirement" *ngIf="character.type === 'retired'"><strong>Ret. Reason</strong>: {{character.retirementReason}}</div>
    <div id="modalInactive" *ngIf="character.type === 'inactive'"><strong>Inactive Reason</strong>: {{character.inactiveReason}}</div>
    <div id="modalAlternatives" *ngIf="character.alternatives"><strong>Alternatives</strong>: {{character.alternatives}}</div>
    <div id="modalFooter">
      <a id="modalLink" [href]="chatLink" target="_blank">Chat 🗣️</a> |
      <span id="modalScreenshot" (click)="screenshot('characterModal')">Copy Card 📷</span>
      <span *ngIf="!isIOS()"> | </span><span *ngIf="!isIOS()"><button id="updateChatLink" (click)="updateChatLink()">Update Chat Link</button></span>
    </div>
  </div>
</div>